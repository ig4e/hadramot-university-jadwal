(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{723:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/majors",function(){return s(5627)}])},9247:function(e,t,s){"use strict";var n=s(5250),a=s(8112),l=s.n(a);s(79);var r=s(6502),i=s(6062),d=s(2949);t.Z=function(e){let{header:t,description:s,link:a,leftSection:c}=e;return(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[t&&(0,n.jsx)(i.Z,{children:t}),s&&(0,n.jsx)(d.Z,{size:"lg",children:s})]}),c?c.children:a&&(0,n.jsxs)(l(),{href:a.href,children:[a.buttonChildren&&(0,n.jsx)(r.Z,{size:"lg",className:"flex items-center gap-2 min-w-max self-end",children:a.buttonChildren}),a.children]})]})}},6502:function(e,t,s){"use strict";var n=s(5250),a=s(9841);s(79),t.Z=function(e){let{children:t,size:s="lg",className:l,intent:r="primary",...i}=e;return(0,n.jsx)("button",{type:"button",...i,className:(0,a.Z)("rounded-md font-medium transition enabled:hover:-translate-y-0.5 enabled:active:hover:translate-y-0 disabled:opacity-50 select-none",{"text-xl font-medium py-2 px-4 rounded-lg":"lg"===s,"text-lg py-1 px-2":"md"===s,"text-md py-1 px-2":"sm"===s,"bg-blue-600 enabled:hover:bg-blue-700 enabled:active:bg-blue-800 text-neutral-50 ":"primary"===r,"bg-red-600 enabled:hover:bg-red-700 enabled:active:bg-red-800 text-neutral-50 ":"danger"===r,"bg-slate-600 enabled:hover:bg-slate-700 enabled:active:bg-slate-800 text-neutral-50 ":"secondary"===r,"border-2 border-slate-600 enabled:hover:border-slate-700 enabled:active:border-slate-800 text-slate-600 enabled:hover:text-slate-700 enabled:active:text-slate-800":"outline"===r},l),children:t})}},6062:function(e,t,s){"use strict";var n=s(5250),a=s(9841);s(79),t.Z=function(e){let{children:t,size:s="lg",className:l}=e;return(0,n.jsx)("div",{className:(0,a.Z)("font-semibold",{"text-2xl md:text-3xl lg:text-4xl font-semibold":"lg"===s,"text-lg md:text-xl lg:text-2xl font-semibold":"md"===s,"text-base md:text-lg lg:text-xl font-semibold":"sm"===s},l),children:t})}},2514:function(e,t,s){"use strict";var n=s(5250);s(79);var a=s(3632);t.Z=function(e){let{rootProps:t,trigger:s,children:l}=e;return(0,n.jsxs)(a.fC,{...t,children:[(0,n.jsx)(a.xz,{asChild:!0,children:s}),(0,n.jsx)(a.h_,{children:(0,n.jsx)(a.aV,{className:"fixed inset-0 bg-slate-900/25 grid place-items-center",children:(0,n.jsx)(a.VY,{dir:"rtl",className:"bg-slate-50 min-w-[20rem] w-full max-w-xl p-4 rounded-md space-y-4",children:l})})})]})}},2949:function(e,t,s){"use strict";var n=s(5250),a=s(9841);s(79),t.Z=function(e){let{children:t,size:s="lg",className:l}=e;return(0,n.jsx)("div",{className:(0,a.Z)("",{"text-base lg:text-lg":"lg"===s,"text-sm lg:text-base":"md"===s,"text-xs lg:text-sm":"sm"===s},l),children:t})}},442:function(e,t,s){"use strict";s.d(t,{K:function(){return n}});let n={1:"عام",2:"موازى"}},5627:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var n=s(5250),a=s(3752),l=s(3139),r=s(1380),i=s(6502),d=s(4538),c=s(9597),o=s(9247),m=s(4574),u=s(4031),x=s(5892),h=s(183),j=s(3224),f=s(3632),b=s(79),p=s(2278);let g=e=>({title:"تم أضافة التخصص بنجاح",description:"تم أضافة التخصص <majorName> بنجاح.".replaceAll("<majorName>",e),success:!0}),v=e=>({title:"تعذر أضافة التخصص",description:"تعذر أضافة التخصص <majorName>.".replaceAll("<majorName>",e),success:!1}),y=e=>({title:"تم تعديل التخصص بنجاح",description:"تم تعديل التخصص <majorName> بنجاح.".replaceAll("<majorName>",e),success:!0}),N=e=>({title:"تعذر تعديل التخصص",description:"تعذر تعديل التخصص <majorName>.".replaceAll("<majorName>",e),success:!1});var w=s(5921);let C=w.y.object().shape({name:w.y.string().required("يرجى أدخال أسم التخصص"),studentsCount:w.y.number().required("يرجى أدخال عدد طلاب التخصص"),type:w.y.number().required("يرجى أدخال أسم التخصص")});var Z=s(6062),_=s(2514),S=function(e){var t;let{trigger:s,majorId:a,onComplete:l}=e,o=!!a,[w,S]=(0,b.useState)(!1),z=o?d.S.major.get.useQuery({id:a}):void 0,k=(0,c.r)(),A=d.S.major.create.useMutation(),E=d.S.major.edit.useMutation(),{register:P,handleSubmit:O,watch:Q,control:X,formState:{errors:q},setValue:L,reset:M}=(0,p.cI)({mode:"onChange",defaultValues:{name:"",studentsCount:0,type:"1"},resolver:(0,m.X)(C)});async function V(e){S(!1),M();try{o?(await E.mutateAsync({id:a,name:e.name,studentsCount:e.studentsCount,type:Number(e.type)}),k.notify(y(e.name))):(await A.mutateAsync({name:e.name,studentsCount:e.studentsCount,type:Number(e.type)}),k.notify(g(e.name)))}catch(t){o?k.notify(N(e.name)):k.notify(v(e.name))}l&&l()}return(0,b.useEffect)(()=>{z&&z.data&&(L("name",z.data.name),L("studentsCount",z.data.studentsCount),L("type",String(z.data.type)))},[null==z?void 0:z.data]),(0,n.jsx)(_.Z,{trigger:s,rootProps:{open:w,onOpenChange(e){S(e)}},children:(0,n.jsxs)("form",{className:"space-y-8",onSubmit:O(V),children:[(0,n.jsx)(f.Dx,{asChild:!0,children:(0,n.jsx)(Z.Z,{size:"md",children:o?"عدل تخصص":"أضف التخصص"})}),(0,n.jsx)(u.o,{...P("name"),label:"أسم التخصص",error:null===(t=q.name)||void 0===t?void 0:t.message}),(0,n.jsxs)("div",{className:"flex items-start gap-2",children:[(0,n.jsx)(p.Qr,{name:"studentsCount",control:X,render:e=>{var t;let{field:s}=e;return(0,n.jsx)(x.Y,{...s,label:"عدد طلاب التخصص",error:null===(t=q.studentsCount)||void 0===t?void 0:t.message,type:"number",className:"w-full"})}}),(0,n.jsx)(p.Qr,{name:"type",control:X,render:e=>{var t;let{field:s}=e;return(0,n.jsx)(h.Ph,{...s,label:"نوع قبول التخصص",data:[{value:"1",label:"عام"},{value:"2",label:"موازى"}],className:"",error:null===(t=q.type)||void 0===t?void 0:t.message})}})]}),(0,n.jsxs)("div",{className:"flex gap-2 items-center justify-end",children:[(0,n.jsx)(f.x8,{asChild:!0,children:(0,n.jsxs)(i.Z,{className:"flex gap-2 items-center",size:"md",intent:"secondary","aria-label":"Close",children:[(0,n.jsx)(r.Pxu,{className:"h-5 w-5"}),(0,n.jsx)("span",{children:"أغلق"})]})}),(0,n.jsxs)(i.Z,{type:"submit",size:"md",className:"flex gap-2 items-center",children:[(0,n.jsx)(j.n,{className:"h-5 w-5"}),(0,n.jsx)("span",{children:o?"تعديل":"أضف"})]})]})]})})},z=s(442),k=function(){var e,t,s,m,u;let x=d.S.major.list.useQuery({limit:250}),h=d.S.major.delete.useMutation(),j=(0,c.r)();return(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsx)(o.Z,{header:"التخصصات",description:"هنا يوجد جميع التخصصات",leftSection:{children:(0,n.jsx)(S,{onComplete:()=>x.refetch(),trigger:(0,n.jsxs)(i.Z,{size:"lg",className:"flex items-center gap-2 min-w-max self-end",children:[(0,n.jsx)(r.pOD,{className:"w-5 h-5 stroke-white stroke-[0.5]"}),(0,n.jsx)("span",{children:"أنشئ تخصص جديد"})]})})}}),(0,n.jsxs)(a.i,{className:"bg-slate-800 rounded-md",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"!text-slate-50",children:"أسم التخصص"}),(0,n.jsx)("th",{className:"!text-slate-50",children:"عدد طلاب التخصص"}),(0,n.jsx)("th",{className:"!text-slate-50",children:"نوع قبول التخصص"}),(0,n.jsx)("th",{className:"!text-slate-50",children:"اجرائات"})]})}),((null===(e=x.data)||void 0===e?void 0:null===(t=e.items)||void 0===t?void 0:t.length)||0)>0&&(0,n.jsx)("tbody",{className:"bg-slate-50 w-full border-b border-slate-300",children:null===(s=x.data)||void 0===s?void 0:s.items.map(e=>{let{id:t,name:s,type:a,studentsCount:l}=e;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:s}),(0,n.jsx)("td",{children:l}),(0,n.jsx)("td",{children:z.K[a]}),(0,n.jsx)("td",{className:"w-28",children:(0,n.jsxs)("div",{className:"flex items-center gap-2 w-fit",children:[(0,n.jsxs)(i.Z,{size:"sm",intent:"danger",className:"flex items-center gap-2",onClick:async()=>{try{await h.mutateAsync({id:t}),j.notify({title:"تم حذف التخصص بنجاح!",description:"تم حذف ".concat(s," بنجاح."),success:!0}),x.refetch()}catch(e){j.notify({title:"تعذر حذف التخصص!",description:"تعذر حذف ".concat(s,"."),success:!1})}},children:[(0,n.jsx)(r.XHJ,{className:"h-5 w-5"}),(0,n.jsx)("span",{children:"حذف"})]}),(0,n.jsx)(S,{onComplete:()=>{x.refetch()},majorId:t,trigger:(0,n.jsxs)(i.Z,{size:"sm",className:"flex items-center gap-2",children:[(0,n.jsx)(r.JtS,{className:"h-5 w-5"}),(0,n.jsx)("span",{children:"تعديل"})]})})]})})]},t)})})]}),0>=((null===(m=x.data)||void 0===m?void 0:null===(u=m.items)||void 0===u?void 0:u.length)||0)&&!x.isLoading&&(0,n.jsx)("span",{className:"bg-slate-50 w-full text-center flex justify-center",children:"لا يوجد تخصصات"}),x.isLoading&&(0,n.jsx)(l.a,{className:"bg-slate-50 w-full text-center flex justify-center"})]})}},5921:function(e,t,s){"use strict";s.d(t,{y:function(){return n}});var n=s(4004),a=s(8155);n.setLocale(a.ar)}},function(e){e.O(0,[609,850,271,207,16,774,888,179],function(){return e(e.s=723)}),_N_E=e.O()}]);