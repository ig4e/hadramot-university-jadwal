(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[108],{9168:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/subjects",function(){return s(357)}])},9247:function(e,t,s){"use strict";var l=s(5250),n=s(8112),a=s.n(n);s(79);var i=s(6502),r=s(6062),c=s(2949);t.Z=function(e){let{header:t,description:s,link:n,leftSection:d}=e;return(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[t&&(0,l.jsx)(r.Z,{children:t}),s&&(0,l.jsx)(c.Z,{size:"lg",children:s})]}),d?d.children:n&&(0,l.jsxs)(a(),{href:n.href,children:[n.buttonChildren&&(0,l.jsx)(i.Z,{size:"lg",className:"flex items-center gap-2 min-w-max self-end",children:n.buttonChildren}),n.children]})]})}},6502:function(e,t,s){"use strict";var l=s(5250),n=s(9841);s(79),t.Z=function(e){let{children:t,size:s="lg",className:a,intent:i="primary",...r}=e;return(0,l.jsx)("button",{type:"button",...r,className:(0,n.Z)("rounded-md font-medium transition enabled:hover:-translate-y-0.5 enabled:active:hover:translate-y-0 disabled:opacity-50 select-none",{"text-xl font-medium py-2 px-4 rounded-lg":"lg"===s,"text-lg py-1 px-2":"md"===s,"text-md py-1 px-2":"sm"===s,"bg-blue-600 enabled:hover:bg-blue-700 enabled:active:bg-blue-800 text-neutral-50 ":"primary"===i,"bg-red-600 enabled:hover:bg-red-700 enabled:active:bg-red-800 text-neutral-50 ":"danger"===i,"bg-slate-600 enabled:hover:bg-slate-700 enabled:active:bg-slate-800 text-neutral-50 ":"secondary"===i,"border-2 border-slate-600 enabled:hover:border-slate-700 enabled:active:border-slate-800 text-slate-600 enabled:hover:text-slate-700 enabled:active:text-slate-800":"outline"===i},a),children:t})}},6062:function(e,t,s){"use strict";var l=s(5250),n=s(9841);s(79),t.Z=function(e){let{children:t,size:s="lg",className:a}=e;return(0,l.jsx)("div",{className:(0,n.Z)("font-semibold",{"text-2xl md:text-3xl lg:text-4xl font-semibold":"lg"===s,"text-lg md:text-xl lg:text-2xl font-semibold":"md"===s,"text-base md:text-lg lg:text-xl font-semibold":"sm"===s},a),children:t})}},2514:function(e,t,s){"use strict";var l=s(5250);s(79);var n=s(3632);t.Z=function(e){let{rootProps:t,trigger:s,children:a}=e;return(0,l.jsxs)(n.fC,{...t,children:[(0,l.jsx)(n.xz,{asChild:!0,children:s}),(0,l.jsx)(n.h_,{children:(0,l.jsx)(n.aV,{className:"fixed inset-0 bg-slate-900/25 grid place-items-center",children:(0,l.jsx)(n.VY,{dir:"rtl",className:"bg-slate-50 min-w-[20rem] w-full max-w-xl p-4 rounded-md space-y-4",children:a})})})]})}},2949:function(e,t,s){"use strict";var l=s(5250),n=s(9841);s(79),t.Z=function(e){let{children:t,size:s="lg",className:a}=e;return(0,l.jsx)("div",{className:(0,n.Z)("",{"text-base lg:text-lg":"lg"===s,"text-sm lg:text-base":"md"===s,"text-xs lg:text-sm":"sm"===s},a),children:t})}},357:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return _}});var l=s(5250),n=s(3752),a=s(3139),i=s(1380),r=s(6502),c=s(4538),d=s(9597),o=s(9247),u=s(4574),x=s(4031),m=s(3224),h=s(3632),b=s(79),j=s(2278);let f=e=>({title:"تم أضافة المادة بنجاح",description:"تم أضافة المادة <subjectName> بنجاح.".replaceAll("<subjectName>",e),success:!0}),g=e=>({title:"تعذر أضافة المادة",description:"تعذر أضافة المادة <subjectName>.".replaceAll("<subjectName>",e),success:!1}),p=e=>({title:"تم تعديل المادة بنجاح",description:"تم تعديل المادة <subjectName> بنجاح.".replaceAll("<subjectName>",e),success:!0}),v=e=>({title:"تعذر تعديل المادة",description:"تعذر تعديل المادة <subjectName>.".replaceAll("<subjectName>",e),success:!1});var N=s(5921);let y=N.y.object().shape({name:N.y.string().required("يرجى أدخال أسم المادة")});var w=s(6062),Z=s(2514),C=function(e){var t;let{trigger:s,subjectId:n,onComplete:a}=e,o=!!n,[N,C]=(0,b.useState)(!1),_=o?c.S.subject.get.useQuery({id:n}):void 0,S=(0,d.r)(),z=c.S.subject.create.useMutation(),k=c.S.subject.edit.useMutation(),{register:A,handleSubmit:E,watch:O,control:P,formState:{errors:X},setValue:L,reset:M}=(0,j.cI)({mode:"onChange",defaultValues:{name:""},resolver:(0,u.X)(y)});async function V(e){C(!1),M();try{o?(await k.mutateAsync({id:n,...e}),S.notify(p(e.name))):(await z.mutateAsync(e),S.notify(f(e.name)))}catch(t){o?S.notify(v(e.name)):S.notify(g(e.name))}a&&a()}return(0,b.useEffect)(()=>{_&&_.data&&L("name",_.data.name)},[null==_?void 0:_.data]),(0,l.jsx)(Z.Z,{trigger:s,rootProps:{open:N,onOpenChange(e){C(e)}},children:(0,l.jsxs)("form",{className:"space-y-8",onSubmit:E(V),children:[(0,l.jsx)(h.Dx,{asChild:!0,children:(0,l.jsx)(w.Z,{size:"md",children:o?"عدل مادة":"أضف مادة"})}),(0,l.jsx)(x.o,{...A("name"),label:"أسم المادة",error:null===(t=X.name)||void 0===t?void 0:t.message}),(0,l.jsxs)("div",{className:"flex gap-2 items-center justify-end",children:[(0,l.jsx)(h.x8,{asChild:!0,children:(0,l.jsxs)(r.Z,{className:"flex gap-2 items-center",size:"md",intent:"secondary","aria-label":"Close",children:[(0,l.jsx)(i.Pxu,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"أغلق"})]})}),(0,l.jsxs)(r.Z,{type:"submit",size:"md",className:"flex gap-2 items-center",children:[(0,l.jsx)(m.n,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:o?"تعديل":"أضف"})]})]})]})})},_=function(){var e,t,s,u,x;let m=c.S.subject.list.useQuery({limit:250}),h=c.S.subject.delete.useMutation(),b=(0,d.r)();return(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsx)(o.Z,{header:"المواد",description:"هنا يوجد جميع المواد",leftSection:{children:(0,l.jsx)(C,{onComplete:()=>m.refetch(),trigger:(0,l.jsxs)(r.Z,{size:"lg",className:"flex items-center gap-2 min-w-max self-end",children:[(0,l.jsx)(i.pOD,{className:"w-5 h-5 stroke-white stroke-[0.5]"}),(0,l.jsx)("span",{children:"أنشئ مادة جديد"})]})})}}),(0,l.jsxs)(n.i,{className:"bg-slate-800 rounded-md",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"!text-slate-50",children:"أسم المادة"}),(0,l.jsx)("th",{className:"!text-slate-50",children:"اجرائات"})]})}),((null===(e=m.data)||void 0===e?void 0:null===(t=e.items)||void 0===t?void 0:t.length)||0)>0&&(0,l.jsx)("tbody",{className:"bg-slate-50 w-full border-b border-slate-300",children:null===(s=m.data)||void 0===s?void 0:s.items.map(e=>{let{id:t,name:s,createdAt:n,updatedAt:a}=e;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:s}),(0,l.jsx)("td",{className:"w-28",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 w-fit",children:[(0,l.jsxs)(r.Z,{size:"sm",intent:"danger",className:"flex items-center gap-2",onClick:async()=>{try{await h.mutateAsync({id:t}),b.notify({title:"تم حذف المادة بنجاح!",description:"تم حذف ".concat(s," بنجاح."),success:!0}),m.refetch()}catch(e){b.notify({title:"تعذر حذف المادة!",description:"تعذر حذف ".concat(s,"."),success:!1})}},children:[(0,l.jsx)(i.XHJ,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"حذف"})]}),(0,l.jsx)(C,{onComplete:()=>m.refetch(),subjectId:t,trigger:(0,l.jsxs)(r.Z,{size:"sm",className:"flex items-center gap-2",children:[(0,l.jsx)(i.JtS,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:"تعديل"})]})})]})})]},t)})})]}),0>=((null===(u=m.data)||void 0===u?void 0:null===(x=u.items)||void 0===x?void 0:x.length)||0)&&!m.isLoading&&(0,l.jsx)("span",{className:"bg-slate-50 w-full text-center flex justify-center",children:"لا يوجد مادات"}),m.isLoading&&(0,l.jsx)(a.a,{className:"bg-slate-50 w-full text-center flex justify-center"})]})}},5921:function(e,t,s){"use strict";s.d(t,{y:function(){return l}});var l=s(4004),n=s(8155);l.setLocale(n.ar)}},function(e){e.O(0,[609,850,207,774,888,179],function(){return e(e.s=9168)}),_N_E=e.O()}]);